{% extends 'base.html' %}
{% load poll_extras %}

{% load static %}

{% block title %} Темы {% endblock %}

{% block content %}
<h2 id="section">Темы и задачи</h2>


{% for theme in themes %}
<div class="theme_card">
    <h3>{{ theme }}. {{ theme.description }}</h3>
    <div class="task_container">
        {% for task in theme.tasks.all %}
            <div class="task_info">
                {% if user.is_authenticated %}
                    {% get_mark task user as mark %}
                    {% if mark == '-' %}
                        <span class="mark">{{ mark }}/100</span>
                    {% elif mark == 0 %}
                        <span class="mark m_zero">{{ mark }}/100</span>
                    {% elif mark < 51 %}
                        <span class="mark m_good">{{ mark }}/100</span>
                    {% else %}
                        <span class="mark m_well">{{ mark }}/100</span>
                    {% endif %}
                {% else %}
                    <span class="mark">-/100</span>
                {% endif %}
                <a href="/task/{{ task.id }}">
                    <h4>{{ task.title }}</h4>
                    <span>{{ task.description }}</span>
                </a>
            </div>
        {% endfor %}
    </div>
</div>
{% endfor%}

{% endblock%}